(function(p,m){function E(f){function A(){H||(H=!0,J())}function J(){var a=K();a.init({time:u});if(F)B();else{var d=n(),d=Object.keys(d).length;r(d)}b=y();a.bindEvent("user_active",function(){b||(b=y())});a.bindEvent("user_inactive",function(){clearInterval(b);b=null})}function y(){return setInterval(function(){for(var a in d){var h=d[a];if(!h.takeoverComplete&&h.takeoverPermitted){l(h)&&h.secondsInView++;var b=h;if(l(b)&&b.secondsInView>=b.vetDelay)if(D)b="onscroll-native-dfp",-1==h.element.className.indexOf(b)&&
(h.element.className&&(b=" "+b),h.element.className+=b),q.googletag.pubads().refresh([h.slot]),h.secondsInView=0;else{h.takeoverComplete=!0;b=void 0;h.size?b=h.size:(b=h.element.getBoundingClientRect(),b={height:b.height,width:b.width});for(var c=-1,e=void 0,g=0;g<k.length;g++){var v=k[g];if(F||v.selector==h.selector){var f=Math.abs(v.width-b.width)+Math.abs(v.height-b.height);if(-1==c||f<c)c=f,e=v}}if(c>h.sizeDiff)c:{for(c=0;c<k.length;c++)if(e=k[c],e.selector==h.selector&&1.5<e.width/e.height&&
(g=b.width>=e.width,b.height>=e.height&&b.height<=e.height+h.sizeDiff&&g))break c;e=!1}if(b=e){c=h.element.childNodes;for(e=c.length;0<e;e--)h.element.removeChild(c[e-1]);c=h;e=b.width;g=b.height;v="onscroll-placeholder-id-"+L+M++;h=m.createElement("div");f=(c.size.height-g)/2;h.setAttribute("class","onscroll-takeover-ad");h.id=v;h.style.width=e+"px";h.style.height=g+f+"px";h.style.margin="0 auto";h.style.paddingTop=f+"px";c.element.appendChild(h);b=b.id;h={placeholder:h.id};c=p.__onscroll.toLoad;
if(c[b])c[b](h)}}}}},1E3)}function n(){for(var a=0;a<k.length;a++){var b=k[a],c=b.selector,e=m.querySelector(c);!d[c]&&e&&(d[c]={secondsInView:0,takeoverPermitted:!0,takeoverComplete:!1,vetDelay:b.vetDelay,sizeDiff:b.sizeDiff||E,selector:c,element:e,size:e.getBoundingClientRect()})}return d}function l(a){var d=a.element.getBoundingClientRect();F&&(a=a.element.adSlotIframeSize,d={bottom:d.top+a.height,top:d.top,height:a.height,width:a.width,left:d.left,right:d.left+a.width});a=d;var b=v,c=d,e=G;return.5<=
(Math.max(0,Math.min(a.right,b))-Math.max(0,Math.min(a.left,b)))*(Math.max(0,Math.min(c.bottom,e))-Math.max(0,Math.min(c.top,e)))/(d.width*d.height)}function x(a,d,b){a.addEventListener?a.addEventListener(d,b,!1):a.attachEvent("on"+d,b)}function N(){"number"===typeof p.innerWidth?(v=q.innerWidth,G=q.innerHeight):m.documentElement&&(m.documentElement.clientWidth||m.documentElement.clientHeight)&&(v=m.documentElement.clientWidth,G=m.documentElement.clientHeight)}function B(){var b=O();b.bindEvent("takeoverPermitted",
function(a){var b=a.elementId,c=a.slot.matchingSize;a:{for(var e=0;e<k.length;e++)if(c.height==k[e].height&&c.width==k[e].width){c=k[e].vetDelay;break a}c=void 0}D?d[b].vetDelay=w:c&&(d[b].vetDelay=c);d[b].takeoverPermitted=!0;d[b].size=a.slot.matchingSize;d[b].slot=a.slot});b.bindEvent("slotFound",function(a){a=a.elementId;d[a]||(d[a]={secondsInView:0,takeoverComplete:!1,vetDelay:20,selector:a,element:m.getElementById(a)},D||r(1))});b.start({dfpAccountId:a,supportedSizes:t(),typesToIgnore:c,placementsToExclude:e,
creativeSet:C,ordersToExclude:g,nativeDfpReload:D,useImpressionViewable:P})}function t(){for(var a=[],b=0;b<k.length;b++)a.push([k[b].width,k[b].height]);return a}function r(a){if(!Q)return!1;var b=setInterval(function(){q.postMessage({contentId:I,containerId:R,takeoverOpportunities:a,label:"implementation",messageId:b},"*")},1E3);x(q,"message",z)}function z(a){"beacon"===a.data.label&&a.data.contentId===I&&clearInterval(a.data.messageId)}var u=f.disengagementThreshold||10,k=f.contentsToTakeover||
[],c=f.typesToIgnore||[],e=f.placementsToExclude||[],g=f.ordersToExclude||[],a=f.dfpAccountId,d={},b,G,v,H=!1,F=f.dfpMode||!1,P=f.useImpressionViewable||!1,D=f.nativeDfpReload||!1,w=f.nativeDfpVetDelay||20,C=f.creativeSet||!1,E=f.sizeDiff||40,M=0,L=Math.floor(1E5*Math.random()),q,Q=f.tracked||!1,I=f.id,R=f.containerId;try{q=p.top,m=q.document}catch(S){q=p}q.__onscroll&&q.__onscroll.block||p.__onscroll&&p.__onscroll.block||(setInterval(N,300),"loading"!==m.readyState?A():(x(q,"DOMContentLoaded",A),
x(q,"load",A)))}function K(){return function(f,A){function n(c){c||(c=A);c=c.getElementsByTagName("iframe");for(var e=c.length,g,a;e--;){a=c.item(e);try{if(g=a.contentDocument,!z[a]&&g){z[a]=!0;for(var d=t.length;d--;)t[d].observe(a.contentWindow);n(g)}}catch(b){z[a]=!0}}}function y(c,e,g){p(c,{name:c});if(c=e)a:{for(c=u.length;c--;)if(!u[c].isActive){c=!1;break a}c=!0}if(c)for(c="user_active",p(c,{name:c}),g=t.length;g--;)t[g].reset();else{if(e=!e)a:{for(e=k.length;e--;)if(k[e].id===g.id){e=!0;break a}e=
!1}e&&(c="user_inactive",p(c,{name:c}))}}function p(c,e){if(r[c])for(var g=r[c].length;g--;)r[c][g](e)}function l(c,e,g){c.addEventListener?c.addEventListener(e,g,!1):c.attachEvent("on"+e,g)}function x(c,e,g,a){this.id=c;this.isActive=!0;this.observe=g;this.processEvent=function(a,b){e(c+"_"+a,b,this)};this.reset=a||function(){this.isActive=!0}}function w(c){function e(){d.isActive=!0;d.processEvent("active",!0)}function g(){d.isActive=!1;d.processEvent("inactive",!1)}function a(){var a=f.hasFocus();
a&&!d.isActive&&(d.isActive=!0,d.processEvent("active",!0));!a&&d.isActive&&(d.isActive=!1,d.processEvent("inactive",!1))}var d=new x("focus",c,function(c){if(b)return d;b=c;f=b.document;"function"===typeof f.hasFocus?(d.isActive=f.hasFocus(),setInterval(a,1E3)):(l(c,"focus",e),l(c,"focusin",e),l(c,"blur",g),l(c,"focusout",g));return d},!1),b,f;return d}function B(c,e){function g(){d.isActive&&d.processEvent("inactive",!1);d.isActive=!1}function a(){d.isActive||d.processEvent("active",!0);clearTimeout(b);
b=setTimeout(g,1E3*e);d.isActive=!0}e=e||10;var d=new x("input",c,function(b){l(b,"mousemove",a);l(b,"mousedown",a);l(b,"scroll",a);l(b,"keyup",a);l(b,"keypress",a);l(b,"keydown",a);l(b,"touchstart",a);l(b,"touchmove",a);l(b,"touchend",a);f||(f=!0,a());return d},function(){d.isActive=!0;a()}),b,f=!1;return d}var t=[],r={},z=[],u=[],k=[];(function(){try{var c=f.top;A=c.document;f=c}catch(e){A=m}})();return{init:function(c){c=c||{};var e=w(y).observe(f);c=B(y,c.time).observe(f);t.push(e);t.push(c);
u.push(e);k.push(c);k.push(e);setInterval(n,5E3)},bindEvent:function(c,e){"undefined"===typeof r[c]&&(r[c]=[]);r[c].push(e)}}}(p,m)}function O(){return function(f){function p(){f.googletag.cmd=f.googletag.cmd||[];f.googletag.cmd.push(function(){f.googletag.pubads().addEventListener("impressionViewable",function(a){var d=a.slot.getSlotElementId(),b;b=a.slot;b=-1===g.placementsToExclude.indexOf(d)&&l(b)?b.getResponseInformation()?!!m.getElementById(d):!1:void 0;b&&(u("slotFound",{elementId:d}),t(d,
a.slot))})})}function n(){f.googletag.pubadsReady?!w()||g.useImpressionViewable?p():(setInterval(y,1E3),y()):setTimeout(n,1E3)}function y(){for(var a=w(),d=0;d<a.length;d++){var b=a[d],e=b.getSlotElementId();if(-1===g.placementsToExclude.indexOf(e)&&l(b)){var f=e;!c[f]&&b.getResponseInformation()&&(m.getElementById(f)&&u("slotFound",{elementId:f}),c[f]=!0);t(e,b)}}}function w(){var a=f.googletag,d;a.pubads().getSlots?d=a.pubads().getSlots():a.getSlots&&(d=a.getSlots());return d}function l(a){var d=
x(a),b=g.supportedSizes,c=1E3,e;if(g.nativeDfpReload&&0===b.length)for(var b=[],f=0;f<a.getSizes().length;f++){var k=a.getSizes()[f].getWidth(),l=a.getSizes()[f].getHeight();50<k&&50<l&&b.push([k,l])}if(!d)return!1;a.matchingSize||(a.matchingSize={});for(f=0;f<b.length;f++)k=Math.abs(d.width-b[f][0])+Math.abs(d.height-b[f][1]),k<c&&(c=k,e=b[f]);return 5>c?(a.matchingSize.width=e[0],a.matchingSize.height=e[1],!0):!1}function x(a){a.wrapper||(a.wrapper=m.getElementById(a.getSlotElementId()));return(a=
a.wrapper)?C(a):!1}function C(a){return MutationObserver?(a.mutationObserver||(a.mutationObserver=new MutationObserver(function(){a.adSlotIframeSize=B(a)}),a.mutationObserver.observe(a,{childList:!0,attributes:!0}),a.adSlotIframeSize=B(a)),a.adSlotIframeSize):B(a)}function B(a){a=a.getElementsByTagName("iframe");for(var d=0;d<a.length;d++){var b=a[d].getBoundingClientRect();if(b.width&&b.height)return b}}function t(a,d){if(!k[a]&&x(d)){var b=d.getResponseInformation();if(b){k[a]=!0;if(!b.lineItemId||
!g.dfpAccountId||!g.typesToIgnore.length&&!g.creativeSet)return u("takeoverPermitted",{elementId:a,slot:d});z(b.lineItemId,function(b){if(r(b))return u("takeoverPermitted",{elementId:a,slot:d})})}}}function r(a){for(var d=0;d<g.typesToIgnore.length;d++)if(g.typesToIgnore[d].lineItemType===a.lineItemType&&("all"===g.typesToIgnore[d].priority||g.typesToIgnore[d].priority==a.priority))return!1;if(g.creativeSet&&"CREATIVE_SET"===a.roadblockingType)return!1;var b=g.ordersToExclude;if(b)for(d=0;d<b.length;d++)if(a.orderId===
b[d])return!1;return!0}function z(a,d){var b=new XMLHttpRequest;b.onreadystatechange=function(){if(4==b.readyState){var c;try{c=JSON.parse(b.responseText)}catch(e){c={}}if("READY"===c.state)return d(c);if("PENDING"===c.state)return setTimeout(function(){z(a,d)},2E3)}};b.open("GET","https://dfp-gateway.onscroll.com/1/"+g.dfpAccountId+"/"+a,!0);b.send()}function u(a,c){if(e[a])for(var b=0;b<e[a].length;b++)e[a][b](c)}var k={},c={},e={},g={};return{start:function(a){g=a;n()},bindEvent:function(a,c){e[a]||
(e[a]=[]);e[a].push(c)}}}(p.top)}if(!p.__onscroll)return!1;for(var n=p.__onscroll,C=n.vetTakeover=n.vetTakeover||[],n=n.vetTakeoverLoaded=n.vetTakeoverLoaded||{},n=function(f,n){for(var p=[],m=0;m<f.length;m++)n[m]||(p.push(m),n[m]=!0);return p}(C,n),w=0;w<n.length;w++)(function(f){return function(){E(f)}})(C[n[w]])()})(window,document);
