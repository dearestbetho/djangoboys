(function(g,C){function I(c){function J(e){if(!ba)return!1;var n=setInterval(function(){l.postMessage({contentId:Q,containerId:P,selector:"#"+G,label:"implementation",messageId:n,loadType:e},"*")},1E3);y(l,"message",h)}function h(e){"beacon"===e.data.label&&e.data.contentId===Q&&clearInterval(e.data.messageId)}function H(){y(l,"scroll",p);y(l,"resize",p);y(l,"load",p);setInterval(z,300);setTimeout(p,0);var e=ca();e.init({time:I});D=t();e.bindEvent("user_active",function(){D||(D=t())});e.bindEvent("user_inactive",
function(){clearInterval(D);D=null})}function da(){var e=q.createElement("div"),n=e.style;e.id=""+K+"_onScrOllRoot";A(n);return e}function k(e){var n;a:{n=g.frameElement;for(var a=g,b=e;n;){b=n;try{var d=a.parent;n=d.frameElement;a=d}catch(f){n=b;break a}}n=b}a=q.createElement("div");A(a.style);a.id=K+"_wrapper";if(!C.body.contains(e))return e.appendChild(a),a;"iframe"===n.nodeName.toLowerCase()?(n.parentNode.insertBefore(a,n),n.style.display="none"):n.appendChild(a);return a}function A(e){e.clear=
"both";e.position="relative";e.left=0;e.top=0;e.margin="0px auto";e.width=m+"px";e.height=x+"px"}function v(){if(G){var e=C.getElementById(G)||q.getElementById(G);if(e)return e}return!1}function y(e,a,b){e.addEventListener?e.addEventListener(a,b,!1):e.attachEvent("on"+a,b)}function t(){return setInterval(function(){w()&&L++;w()&&0==L%M&&0!=L&&B()},1E3)}function p(){N=!0;R||z();b(S)}function ea(){b(S)}function z(){if(N){N=!1;var e=0,a=T,b=a.getBoundingClientRect().left;if(a.offsetParent){do e+=a.offsetTop;
while(a=a.offsetParent)}R={top:e,left:b};a=e=0;"number"===typeof l.innerWidth?(e=l.innerWidth,a=l.innerHeight):q.documentElement&&(q.documentElement.clientWidth||q.documentElement.clientHeight)&&(e=q.documentElement.clientWidth,a=q.documentElement.clientHeight);U=e;V=a}}function w(){if(l.$sf)return l.$sf.ext.inViewPercentage()/100>=F;var a=O.getBoundingClientRect(),b=U,d=V;return(Math.max(0,Math.min(a.right,b))-Math.max(0,Math.min(a.left,b)))*(Math.max(0,Math.min(a.bottom,d))-Math.max(0,Math.min(a.top,
d)))/((a.right-a.left)*(a.bottom-a.top))>=F}function a(){u=q.createElement("div");var a=u.style;u.id=K+"_onScrOllAd";A(a);return u}function b(a){W()||X||!a&&!w()||(X=!0,clearInterval(Y),B())}function B(){var a;a=E&&E.length==r.length?Z(r[d()]):Z(r[f()]);for(a="<html><head><style>body{margin:0 0 0 0;padding:0 0 0 0;height:100%;}</style></head><body>"+a+"</body></html>";u.hasChildNodes();)u.removeChild(u.lastChild);var b=C.createElement("iframe");b.width=m+"px";b.height=x+"px";b.frameBorder="0";b.scrolling=
"no";u&&u.appendChild(b);if(g.navigator.userAgent.match(/MSIE\s/))b.contentWindow.contents=a,b.src="javascript:window['contents']";else{var c=b.contentDocument||b.contentWindow&&b.contentWindow.document||b.document;c.open();c.write(a);setTimeout(function(){c.close()},0)}aa?J("refresh"):(aa=!0,J("initial"))}function f(){if(!f.nextIndex||f.nextIndex>=r.length)f.nextIndex=0;f.nextIndex++;return f.nextIndex-1}function d(){for(var a=Math.random(),b=E[0],d=0;d<E.length;d++){if(a<b)return d;b+=E[d+1]}return 0}
function Z(a){var b,d,f,c,B,r=0,l=0,k=[];if(!a)return a;a+="";do b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(r++)),d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(r++)),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(r++)),B="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(r++)),f=b<<18|d<<12|c<<6|B,b=f>>16&255,d=f>>8&255,f&=255,64==c?k[l++]=
String.fromCharCode(b):64==B?k[l++]=String.fromCharCode(b,d):k[l++]=String.fromCharCode(b,d,f);while(r<a.length);return k.join("")}function W(){return l.__onscroll&&l.__onscroll.block||g.__onscroll&&g.__onscroll.block}var r=c.adCodes||[c.adCode],E=c.probabilities||[],m=c.width,x=c.height,G=c.placeholder,F=c.percent||.5,S=!!c.outOfView,M=c.refresh,I=c.disengagementThreshold||10,P=c.containerId,Q=c.id,ba=c.tracked,K=Math.floor(1E3*Math.random())+0,L=0,X=!1,N=!1,aa=!1,R,D,Y,V,U,u,l=g,q=g.document;try{g.$sf||
(l=g.top,q=l.document)}catch(e){l=g,M=!1,q=g.document}if(!W()&&(c=v())){var T=k(c),O=da();T.appendChild(O);O.appendChild(a());M&&!l.$sf?H():Y=setInterval(ea,500);J("implementation")}}function ca(){return function(c,g){function h(a){a||(a=g);a=a.getElementsByTagName("iframe");for(var b=a.length,c,f;b--;){f=a.item(b);try{if(c=f.contentDocument,!v[f]&&c){v[f]=!0;for(var d=t.length;d--;)t[d].observe(f.contentWindow);h(c)}}catch(k){v[f]=!0}}}function H(a,b,c){m(a,{name:a});if(a=b)a:{for(a=z.length;a--;)if(!z[a].isActive){a=
!1;break a}a=!0}if(a)for(a="user_active",m(a,{name:a}),c=t.length;c--;)t[c].reset();else{if(b=!b)a:{for(b=w.length;b--;)if(w[b].id===c.id){b=!0;break a}b=!1}b&&(a="user_inactive",m(a,{name:a}))}}function m(a,b){if(p[a])for(var c=p[a].length;c--;)p[a][c](b)}function k(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)}function A(a,b,c,f){this.id=a;this.isActive=!0;this.observe=c;this.processEvent=function(c,f){b(a+"_"+c,f,this)};this.reset=f||function(){this.isActive=!0}}
function x(a){function b(){d.isActive=!0;d.processEvent("active",!0)}function c(){d.isActive=!1;d.processEvent("inactive",!1)}function f(){var a=h.hasFocus();a&&!d.isActive&&(d.isActive=!0,d.processEvent("active",!0));!a&&d.isActive&&(d.isActive=!1,d.processEvent("inactive",!1))}var d=new A("focus",a,function(a){if(g)return d;g=a;h=g.document;"function"===typeof h.hasFocus?(d.isActive=h.hasFocus(),setInterval(f,1E3)):(k(a,"focus",b),k(a,"focusin",b),k(a,"blur",c),k(a,"focusout",c));return d},!1),
g,h;return d}function y(a,b){function c(){d.isActive&&d.processEvent("inactive",!1);d.isActive=!1}function f(){d.isActive||d.processEvent("active",!0);clearTimeout(g);g=setTimeout(c,1E3*b);d.isActive=!0}b=b||10;var d=new A("input",a,function(a){k(a,"mousemove",f);k(a,"mousedown",f);k(a,"scroll",f);k(a,"keyup",f);k(a,"keypress",f);k(a,"keydown",f);k(a,"touchstart",f);k(a,"touchmove",f);k(a,"touchend",f);h||(h=!0,f());return d},function(){d.isActive=!0;f()}),g,h=!1;return d}var t=[],p={},v=[],z=[],
w=[];(function(){try{var a=c.top;g=a.document;c=a}catch(b){g=C}})();return{init:function(a){a=a||{};var b=x(H).observe(c);a=y(H,a.time).observe(c);t.push(b);t.push(a);z.push(b);w.push(a);w.push(b);setInterval(h,5E3)},bindEvent:function(a,b){"undefined"===typeof p[a]&&(p[a]=[]);p[a].push(b)}}}(g,C)}if(!g.__onscroll)return!1;for(var h=g.__onscroll,P=h.toLoad=h.toLoad||{},x=h["engaged-refresh"]=h["engaged-refresh"]||[],h=h.engagedRefreshLoaded=h.engagedRefreshLoaded||{},h=function(c,g){for(var h=[],
m=0;m<c.length;m++)g[m]||(h.push(m),g[m]=!0);return h}(x,h),v=0;v<h.length;v++){var m=x[h[v]],F=function(c){return function(g){for(var h in g)c[h]=g[h];I(c)}}(m);m.preload?P[m.id]=F:F()}})(window,document);
